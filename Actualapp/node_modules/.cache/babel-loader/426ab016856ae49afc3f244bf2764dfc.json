{"ast":null,"code":"export var ExposedPromiseStatus;\n\n(function (ExposedPromiseStatus) {\n  ExposedPromiseStatus[\"PENDING\"] = \"pending\";\n  ExposedPromiseStatus[\"RESOLVED\"] = \"resolved\";\n  ExposedPromiseStatus[\"REJECTED\"] = \"rejected\";\n})(ExposedPromiseStatus || (ExposedPromiseStatus = {}));\n\nconst notInitialized = () => {\n  throw new Error('ExposedPromise not initialized yet.');\n};\n/**\n * Exposed promise allow you to create a promise and then resolve it later, from the outside\n */\n\n\nexport class ExposedPromise {\n  constructor() {\n    this._resolve = notInitialized;\n    this._reject = notInitialized;\n    this._status = ExposedPromiseStatus.PENDING;\n    this._promise = new Promise((innerResolve, innerReject) => {\n      this._resolve = value => {\n        if (this.isSettled()) {\n          return;\n        }\n\n        this._promiseResult = value;\n        innerResolve(value);\n        this._status = ExposedPromiseStatus.RESOLVED;\n        return;\n      };\n\n      this._reject = reason => {\n        if (this.isSettled()) {\n          return;\n        }\n\n        this._promiseError = reason;\n        innerReject(reason);\n        this._status = ExposedPromiseStatus.REJECTED;\n        return;\n      };\n    });\n  }\n\n  get promise() {\n    return this._promise;\n  }\n\n  get resolve() {\n    return this._resolve;\n  }\n\n  get reject() {\n    return this._reject;\n  }\n\n  get status() {\n    return this._status;\n  }\n\n  get promiseResult() {\n    return this._promiseResult;\n  }\n\n  get promiseError() {\n    return this._promiseError;\n  }\n\n  static resolve(value) {\n    const promise = new ExposedPromise();\n    promise.resolve(value);\n    return promise;\n  }\n\n  static reject(reason) {\n    const promise = new ExposedPromise();\n    promise.reject(reason);\n    return promise;\n  }\n\n  isPending() {\n    return this.status === ExposedPromiseStatus.PENDING;\n  }\n\n  isResolved() {\n    return this.status === ExposedPromiseStatus.RESOLVED;\n  }\n\n  isRejected() {\n    return this.status === ExposedPromiseStatus.REJECTED;\n  }\n\n  isSettled() {\n    return this.isResolved() || this.isRejected();\n  }\n\n}","map":{"version":3,"sources":["../../../src/utils/exposed-promise.ts"],"names":[],"mappings":"AAAA,OAAA,IAAY,oBAAZ;;AAAA,CAAA,UAAY,oBAAZ,EAAgC;AAC9B,EAAA,oBAAA,CAAA,SAAA,CAAA,GAAA,SAAA;AACA,EAAA,oBAAA,CAAA,UAAA,CAAA,GAAA,UAAA;AACA,EAAA,oBAAA,CAAA,UAAA,CAAA,GAAA,UAAA;AACD,CAJD,EAAY,oBAAoB,KAApB,oBAAoB,GAAA,EAAA,CAAhC;;AASA,MAAM,cAAc,GAAG,MAAY;AACjC,QAAM,IAAI,KAAJ,CAAU,qCAAV,CAAN;AACD,CAFD;AAIA;;AAEG;;;AACH,OAAM,MAAO,cAAP,CAAqB;AA6BzB,EAAA,WAAA,GAAA;AA1BQ,SAAA,QAAA,GAAuB,cAAvB;AACA,SAAA,OAAA,GAAqB,cAArB;AACA,SAAA,OAAA,GAAgC,oBAAoB,CAAC,OAArD;AAyBN,SAAK,QAAL,GAAgB,IAAI,OAAJ,CAAe,CAAC,YAAD,EAA2B,WAA3B,KAA2D;AACxF,WAAK,QAAL,GAAiB,KAAD,IAAoB;AAClC,YAAI,KAAK,SAAL,EAAJ,EAAsB;AACpB;AACD;;AAED,aAAK,cAAL,GAAsB,KAAtB;AAEA,QAAA,YAAY,CAAC,KAAD,CAAZ;AAEA,aAAK,OAAL,GAAe,oBAAoB,CAAC,QAApC;AAEA;AACD,OAZD;;AAaA,WAAK,OAAL,GAAgB,MAAD,IAAqB;AAClC,YAAI,KAAK,SAAL,EAAJ,EAAsB;AACpB;AACD;;AAED,aAAK,aAAL,GAAqB,MAArB;AAEA,QAAA,WAAW,CAAC,MAAD,CAAX;AAEA,aAAK,OAAL,GAAe,oBAAoB,CAAC,QAApC;AAEA;AACD,OAZD;AAaD,KA3Be,CAAhB;AA4BD;;AAjDiB,MAAP,OAAO,GAAA;AAChB,WAAO,KAAK,QAAZ;AACD;;AAEiB,MAAP,OAAO,GAAA;AAChB,WAAO,KAAK,QAAZ;AACD;;AACgB,MAAN,MAAM,GAAA;AACf,WAAO,KAAK,OAAZ;AACD;;AACgB,MAAN,MAAM,GAAA;AACf,WAAO,KAAK,OAAZ;AACD;;AACuB,MAAb,aAAa,GAAA;AACtB,WAAO,KAAK,cAAZ;AACD;;AACsB,MAAZ,YAAY,GAAA;AACrB,WAAO,KAAK,aAAZ;AACD;;AAiCoB,SAAP,OAAO,CAAI,KAAJ,EAAa;AAChC,UAAM,OAAO,GAAG,IAAI,cAAJ,EAAhB;AACA,IAAA,OAAO,CAAC,OAAR,CAAgB,KAAhB;AAEA,WAAO,OAAP;AACD;;AAEmB,SAAN,MAAM,CAAyB,MAAzB,EAAmC;AACrD,UAAM,OAAO,GAAG,IAAI,cAAJ,EAAhB;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,MAAf;AAEA,WAAO,OAAP;AACD;;AAEM,EAAA,SAAS,GAAA;AACd,WAAO,KAAK,MAAL,KAAgB,oBAAoB,CAAC,OAA5C;AACD;;AAEM,EAAA,UAAU,GAAA;AACf,WAAO,KAAK,MAAL,KAAgB,oBAAoB,CAAC,QAA5C;AACD;;AAEM,EAAA,UAAU,GAAA;AACf,WAAO,KAAK,MAAL,KAAgB,oBAAoB,CAAC,QAA5C;AACD;;AAEM,EAAA,SAAS,GAAA;AACd,WAAO,KAAK,UAAL,MAAqB,KAAK,UAAL,EAA5B;AACD;;AAxFwB","sourceRoot":"","sourcesContent":["export var ExposedPromiseStatus;\n(function (ExposedPromiseStatus) {\n    ExposedPromiseStatus[\"PENDING\"] = \"pending\";\n    ExposedPromiseStatus[\"RESOLVED\"] = \"resolved\";\n    ExposedPromiseStatus[\"REJECTED\"] = \"rejected\";\n})(ExposedPromiseStatus || (ExposedPromiseStatus = {}));\nconst notInitialized = () => {\n    throw new Error('ExposedPromise not initialized yet.');\n};\n/**\n * Exposed promise allow you to create a promise and then resolve it later, from the outside\n */\nexport class ExposedPromise {\n    constructor() {\n        this._resolve = notInitialized;\n        this._reject = notInitialized;\n        this._status = ExposedPromiseStatus.PENDING;\n        this._promise = new Promise((innerResolve, innerReject) => {\n            this._resolve = (value) => {\n                if (this.isSettled()) {\n                    return;\n                }\n                this._promiseResult = value;\n                innerResolve(value);\n                this._status = ExposedPromiseStatus.RESOLVED;\n                return;\n            };\n            this._reject = (reason) => {\n                if (this.isSettled()) {\n                    return;\n                }\n                this._promiseError = reason;\n                innerReject(reason);\n                this._status = ExposedPromiseStatus.REJECTED;\n                return;\n            };\n        });\n    }\n    get promise() {\n        return this._promise;\n    }\n    get resolve() {\n        return this._resolve;\n    }\n    get reject() {\n        return this._reject;\n    }\n    get status() {\n        return this._status;\n    }\n    get promiseResult() {\n        return this._promiseResult;\n    }\n    get promiseError() {\n        return this._promiseError;\n    }\n    static resolve(value) {\n        const promise = new ExposedPromise();\n        promise.resolve(value);\n        return promise;\n    }\n    static reject(reason) {\n        const promise = new ExposedPromise();\n        promise.reject(reason);\n        return promise;\n    }\n    isPending() {\n        return this.status === ExposedPromiseStatus.PENDING;\n    }\n    isResolved() {\n        return this.status === ExposedPromiseStatus.RESOLVED;\n    }\n    isRejected() {\n        return this.status === ExposedPromiseStatus.REJECTED;\n    }\n    isSettled() {\n        return this.isResolved() || this.isRejected();\n    }\n}\n//# sourceMappingURL=exposed-promise.js.map"]},"metadata":{},"sourceType":"module"}